<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="cache-control" content="no-cache, no-store, must-revalidate">
  <meta name="pragma" content="no-cache">
  <meta name="expires" content="0">
  <title>{% block title %}Buscador Online{% endblock %}</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">

  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">

  <!-- noUiSlider CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.6.1/nouislider.min.css" crossorigin="anonymous">

  <!-- Font Awesome 4 (for WhatsApp icon) -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

  <!-- Font Awesome 6 Free CDN -->
  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>

  <!-- Custom Styles -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">

  <link rel="icon" href="/static/img/favicon.png" type="image/x-icon">

  {% block extra_head %}{% endblock %}
</head>
<body class="theme-sim">
<!-- Barra de navegación -->
<nav class="navbar navbar-expand-lg bg-dark text-white shadow-sm sticky-top">
  <div class="container-fluid px-4">
    <!-- Logo siempre visible -->
    <a class="navbar-brand" href="/">
      <img src="/static/img/logo_0.png" alt="Logo Familia Bercomat" height="40">
    </a>

    <!-- Botón de hamburguesa solo en móvil -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Contenido colapsable -->
    <div class="collapse navbar-collapse" id="navbarCollapse">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link" href="{{ url_for('productos') }}">Productos</a>
        </li>
        {% if session.get('role') == 'admin' %}
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="configDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Configuraciones
          </a>
          <ul class="dropdown-menu" aria-labelledby="configDropdown">
            <li><a class="dropdown-item" href="{{ url_for('config_secuencias') }}">Secuencias Numéricas</a></li>
            <li><a class="dropdown-item" href="{{ url_for('modulo_facturacion_arca.config_facturacion') }}">Facturación ARCA</a></li>
            <li><a class="dropdown-item" href="{{ url_for('config_pos') }}">Config POS</a></li>
          </ul>
        </li>
        {% endif %}
      </ul>
      <div class="navbar-nav ms-auto d-flex align-items-center gap-3">
        <!-- Contenido de sesión -->
        {% if session.get('usuario') %}
          <span class="navbar-text text-light session-info">Hola, {{ session['usuario'] }}</span>
          <button id="themeToggleBtn" class="btn btn-outline-light btn-sm rounded-pill" title="Cambiar tema">
            <i class="bi bi-moon-stars"></i>
          </button>
          <a href="{{ url_for('autenticacion_avanzada.logout') }}" class="btn btn-outline-light rounded-pill px-3">Cerrar Sesión</a>
        {% else %}
          <a href="{{ url_for('autenticacion_avanzada.login_avanzado') }}" class="btn btn-outline-light rounded-pill px-3">Iniciar Sesión</a>
        {% endif %}
      </div>
    </div>
  </div>
</nav>

<!-- Contenido principal -->
<main class="container-fluid py-4">
  {% block content %}{% endblock %}
</main>

<!-- Modal para búsqueda de clientes -->
<div id="clientSearchModal" class="modal fade client-search-modal" tabindex="-1" aria-labelledby="clientSearchModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content shadow-lg border-0">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title" id="clientSearchModalLabel"><i class="bi bi-person me-2"></i> Buscar Cliente</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body p-4">
        <div class="input-group mb-4">
          <span class="input-group-text"><i class="bi bi-search"></i></span>
          <input type="text" id="clientSearchInput" class="form-control" placeholder="Buscar por DNI o ID Cliente" autocomplete="off">
          <button class="btn btn-outline-success ms-2" title="Agregar Nuevo Cliente" hidden="true">
            <i class="bi bi-person-plus"></i>
          </button>
        </div>
        <div id="clientSearchResults" class="list-group" style="max-height: 300px; overflow-y: auto;"></div>
        <div id="selectedClientInfo" class="mt-4" style="display: none;">
          <div class="row g-3">
            <div class="col-md-3">
              <div class="client-info-section p-3 rounded shadow-sm">
                <h6><i class="bi bi-person-fill me-2"></i>Información Personal</h6>
                <p><strong>Nombre:</strong> <span id="clientName"></span></p>
                <p><strong>Número Cliente:</strong> <span id="clientNumber"></span></p>
                <p><strong>Bloqueado:</strong> <span id="clientBlocked"></span></p>
                <p><strong>Tipo Contribuyente:</strong> <span id="clientType"></span></p>
              </div>
            </div>
            <div class="col-md-3">
              <div class="client-info-section p-3 rounded shadow-sm">
                <h6><i class="bi bi-wallet2 me-2"></i>Datos Fiscales</h6>
                <p><strong>Límite Crédito:</strong> <span id="clientCreditLimit"></span></p>
                <p><strong>Grupo Impuestos:</strong> <span id="clientTaxGroup"></span></p>
                <p><strong>DNI (NIF):</strong> <span id="clientNif"></span></p>
                <p><strong>NIF (TIF):</strong> <span id="clientTif"></span></p>
              </div>
            </div>
            <div class="col-md-3">
              <div class="client-info-section p-3 rounded shadow-sm">
                <h6><i class="bi bi-geo-alt-fill me-2"></i>Contacto</h6>
                <p><strong>Dirección:</strong> <span id="clientAddress"></span></p>
                <p><strong>Email:</strong> <span id="clientEmail"></span></p>
                <p><strong>Teléfono:</strong> <span id="clientPhone"></span></p>
              </div>
            </div>
            <div class="col-md-3">
              <div class="client-info-section p-3 rounded shadow-sm">
                <h6><i class="bi bi-calendar-date me-2"></i>Fechas</h6>
                <p><strong>Fecha Creación:</strong> <span id="clientCreateDate"></span></p>
                <p><strong>Fecha Modificación:</strong> <span id="clientModDate"></span></p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary rounded-pill" data-bs-dismiss="modal"><i class="bi bi-x-circle me-1"></i> Cerrar</button>
        <button type="button" class="btn btn-primary rounded-pill" id="addClientToCartBtn" onclick="addClientToCart()" disabled><i class="bi bi-cart-plus me-1"></i> Agregar al Carrito</button>
      </div>
    </div>
  </div>
</div>

<!-- Overlay del carrito -->
<div id="cartOverlay" class="cart-overlay d-none">
  <div class="cart-container shadow-lg">
    <div class="cart-header bg-dark text-white">
      <h4><i class="bi bi-cart3 me-2"></i> Carrito</h4>
      <button class="btn-close btn-close-white" onclick="toggleCart()"></button>
    </div>
    <div class="cart-actions bg-light p-3 d-flex gap-3 flex-wrap">
      <button class="btn btn-outline-danger rounded-pill" onclick="clearCart()" title="Vaciar Carrito"><i class="bi bi-trash3"></i></button>
      <button class="btn btn-outline-primary rounded-pill" onclick="generatePdfOnly()" title="Generar Solo PDF"><i class="bi bi-file-earmark-pdf"></i></button>
      <button class="btn btn-outline-success rounded-pill" onclick="showQuotationTypeModal()" title="Crear en BercoPOS"><i class="bi bi-cloud-upload"></i></button>
      <button class="btn btn-outline-primary rounded-pill" onclick="openRecoverQuotationModal()" title="Recuperar Presupuesto"><i class="bi bi-search"></i></button>
      <button class="btn btn-outline-info rounded-pill" onclick="openClientSearchModal()" title="Buscar Cliente"><i class="bi bi-person"></i></button>
      <button class="btn btn-outline-secondary rounded-pill disabled" title="Crear Pedido (Próximamente)"><i class="bi bi-receipt"></i></button>
      <button class="btn btn-outline-secondary rounded-pill disabled" title="Definir Envío (Próximamente)"><i class="bi bi-truck"></i></button>
      <button id="facturarBtn" class="btn btn-outline-success rounded-pill" onclick="facturar()" title="Emitir Factura" disabled><i class="bi bi-receipt-cutout"></i> Facturar</button>
    </div>
    <div class="cart-content p-4 overflow-auto">
      <div id="cartClientInfo" class="cart-client-info mb-4 p-3 bg-light rounded" style="display: none;">
        <div class="client-info-inline">
          <span><strong>Nombre:</strong> <span id="cartClientName"></span></span>
          <span><strong>DNI:</strong> <span id="cartClientNif"></span></span>
          <span><strong>Número Cliente:</strong> <span id="cartClientNumber"></span></span>
          <span><strong>Dirección:</strong> <span id="cartClientAddress"></span></span>
          <button class="btn btn-link text-info p-0 ms-2" onclick="showClientDetailsModal">
            <i class="bi bi-eye"></i> Detalles
          </button>
          <button class="btn btn-link text-danger p-0 ms-2" onclick="removeClientFromCart()" title="Eliminar Cliente">
            <i class="bi bi-trash"></i>
          </button>
        </div>
      </div>
      <!-- Vista de escritorio (tabla) -->
      <div class="cart-table-container desktop-view">
        <table class="table table-hover cart-table-desktop">
          <thead class="bg-light">
            <tr>
              <th>SKU</th>
              <th>Producto</th>
              <th>Cant.</th>
              <th>Precio</th>
              <th>Total</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="cartItemsDesktop"></tbody>
        </table>
      </div>
      <!-- Vista móvil (divs) -->
      <div class="cart-mobile-container mobile-view" style="display: none;">
        <div id="cartItemsMobile"></div>
      </div>
    </div>
    <!-- Footer fijo para el total -->
    <div class="cart-footer bg-light p-3 border-top">
      <div class="d-flex justify-content-between align-items-center flex-wrap gap-2">
        <div class="observations-wrapper flex-grow-1">
          <label for="cartObservations" class="fw-bold me-2">Observaciones:</label>
          <textarea id="cartObservations" class="form-control form-control-sm" maxlength="180" placeholder="Ingrese observaciones (máx. 180 caracteres)" rows="1"></textarea>
        </div>
        <div class="total-wrapper d-flex align-items-center">
          <span class="fw-bold me-2">Total:</span>
          <span id="cartTotalFixed" class="fw-bold">$0,00</span>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal para detalles del cliente -->
<div id="clientDetailsModal" class="modal fade client-details-modal" tabindex="-1" aria-labelledby="clientDetailsModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title" id="clientDetailsModalLabel"><i class="bi bi-person me-2"></i> Detalles del Cliente</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body p-4">
        <div class="row g-4">
          <div class="col-md-6">
            <div class="client-info-section p-3 rounded shadow-sm">
              <h6><i class="bi bi-person-fill me-2"></i>Información Personal</h6>
              <p><strong>Nombre:</strong> <span id="modalClientName"></span></p>
              <p><strong>Número Cliente:</strong> <span id="modalClientNumber"></span></p>
              <p><strong>Bloqueado:</strong> <span id="modalClientBlocked"></span></p>
              <p><strong>Tipo Contribuyente:</strong> <span id="modalClientType"></span></p>
            </div>
          </div>
          <div class="col-md-6">
            <div class="client-info-section p-3 rounded shadow-sm">
              <h6><i class="bi bi-wallet2 me-2"></i>Datos Fiscales</h6>
              <p><strong>Límite Crédito:</strong> <span id="modalClientCreditLimit"></span></p>
              <p><strong>Grupo Impuestos:</strong> <span id="modalClientTaxGroup"></span></p>
              <p><strong>DNI (NIF):</strong> <span id="modalClientNif"></span></p>
              <p><strong>NIF (TIF):</strong> <span id="modalClientTif"></span></p>
            </div>
          </div>
          <div class="col-md-6">
            <div class="client-info-section p-3 rounded shadow-sm">
              <h6><i class="bi bi-geo-alt-fill me-2"></i>Contacto</h6>
              <p><strong>Dirección:</strong> <span id="modalClientAddress"></span></p>
              <p><strong>Email:</strong> <span id="modalClientEmail"></span></p>
              <p><strong>Teléfono:</strong> <span id="modalClientPhone"></span></p>
            </div>
          </div>
          <div class="col-md-6">
            <div class="client-info-section p-3 rounded shadow-sm">
              <h6><i class="bi bi-calendar-date me-2"></i>Fechas</h6>
              <p><strong>Fecha Creación:</strong> <span id="modalClientCreateDate"></span></p>
              <p><strong>Fecha Modificación:</strong> <span id="modalClientModDate"></span></p>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary rounded-pill" data-bs-dismiss="modal"><i class="bi bi-x-circle me-1"></i> Cerrar</button>
      </div>
    </div>
  </div>
</div>

<!-- Toast para mensajes flash -->
<div class="toast-container position-fixed bottom-0 end-0 p-3">
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="toast align-items-center text-bg-{{ category }} border-0" role="alert" data-bs-delay="3000">
          <div class="d-flex">
            <div class="toast-body">{{ message }}</div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
          </div>
        </div>
      {% endfor %}
    {% endif %}
  {% endwith %}
</div>

<!-- Overlay para atributos -->
<div id="productOverlay" class="product-overlay d-none position-fixed top-0 start-0 w-100 h-100 bg-dark bg-opacity-50 d-flex align-items-center justify-content-center">
  <div id="overlayContent" class="product-attributes-container p-4 rounded shadow-lg" style="max-width: 900px; max-height: 95vh; overflow-y: auto;"></div>
</div>

<!-- Spinner overlay -->
<div id="spinner" class="spinner-overlay" style="display: none;">
  <div class="spinner-border text-primary" role="status">
    <span class="visually-hidden">Cargando...</span>
  </div>
</div>

<!-- Modal para seleccionar tipo de presupuesto -->
<div id="quotationTypeModal" class="modal fade" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title"><i class="bi bi-cloud-upload me-2"></i> Generar Presupuesto</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p>Seleccione una opción para generar el presupuesto:</p>
        <div class="d-flex justify-content-around">
          <button class="btn btn-outline-primary" onclick="createInD365WithType('Caja')">Enviar a Caja</button>
          <button class="btn btn-outline-secondary" onclick="createInD365WithType('Ventas')">Guardar</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal de confirmación de impresión -->
<div id="printConfirmationModal" class="modal fade" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-success text-white">
        <h5 class="modal-title"><i class="bi bi-check-circle me-2"></i> Presupuesto Generado</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p id="printConfirmationMessage"></p>
        <p>¿Desea imprimirlo?</p>
        <div class="d-flex justify-content-around">
          <button class="btn btn-outline-secondary" onclick="closePrintModal(false)">No</button>
          <button class="btn btn-outline-success" onclick="closePrintModal(true)">Sí</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal para recuperar presupuestos -->
<div id="recoverQuotationModal" class="modal fade" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title"><i class="bi bi-arrow-clockwise me-2"></i> Recuperar Presupuesto</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="mb-3 d-flex gap-2">
          <select id="quotationTypeSelect" class="form-select w-25" onchange="searchQuotations()">
            <option value="local">Local (P-)</option>
            <option value="d365">D365 (VENT1-)</option>
          </select>
          <input type="text" id="quotationSearchInput" class="form-control" placeholder="Buscar por ID de presupuesto" oninput="searchQuotations()">
        </div>
        <div id="quotationList" class="list-group" style="max-height: 300px; overflow-y: auto;"></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal de Advertencia para Flete -->
<div class="modal fade modal_warning_flete" id="fleteWarningModal" tabindex="-1" aria-labelledby="fleteWarningModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="fleteWarningModalLabel">Advertencia</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        Se eliminará el flete del presupuesto. ¿Desea continuar?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-primary" id="confirmFleteRemoval">Continuar</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal de Advertencia para Presupuesto Confirmado -->
<div class="modal fade modal_warning_confirmado" id="confirmedQuotationModal" tabindex="-1" aria-labelledby="confirmedQuotationModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header bg-warning">
        <h5 class="modal-title" id="confirmedQuotationModalLabel">Presupuesto Confirmado</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p>El presupuesto <span id="confirmedQuotationId"></span> está confirmado y asociado al pedido <span id="confirmedOrderNumber"></span>. No puede ser editado.</p>
        <p>¿Desea crear un nuevo presupuesto con las mismas líneas?</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" id="cancelNewQuotation" data-bs-dismiss="modal">No</button>
        <button type="button" class="btn btn-primary" id="createNewQuotation">Sí</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal para eliminar cliente -->
<div class="modal fade" id="removeClientWarningModal" tabindex="-1" aria-labelledby="removeClientWarningModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header" style="background-color: #dc3545; color: #fff;">
        <h5 class="modal-title" id="removeClientWarningModalLabel">Advertencia</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p>Eliminar el cliente asociado al presupuesto D365 generará un <strong>nuevo presupuesto</strong>. ¿Estás seguro de continuar?</p>
        <p>Presupuesto actual: <strong id="currentQuotationId">N/A</strong></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal" id="cancelRemoveClient">Cancelar</button>
        <button type="button" class="btn btn-danger" id="confirmRemoveClient">Eliminar Cliente</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal para WhatsApp -->
<div id="whatsappModal" class="modal fade" tabindex="-1" aria-labelledby="whatsappModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title" id="whatsappModalLabel"><i class="fa fa-whatsapp me-2"></i> Enviar mensaje por WhatsApp</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="mb-3">
          <label for="whatsappNumber" class="form-label"><i class="bi bi-telephone me-1"></i> Número de teléfono (sin +54)</label>
          <input type="tel" class="form-control" id="whatsappNumber" placeholder="Ej: 3764123456" pattern="[0-9]+" maxlength="15">
          <div id="whatsappNumberError" class="text-danger mt-1" style="display: none;"></div>
        </div>
        <div class="mb-3">
          <label for="whatsappMessage" class="form-label"><i class="bi bi-chat-left-text me-1"></i> Mensaje (opcional)</label>
          <textarea class="form-control" id="whatsappMessage" rows="3" placeholder="Escribí tu mensaje"></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary rounded-pill" data-bs-dismiss="modal"><i class="bi bi-x-circle me-1"></i> Cancelar</button>
        <button type="button" class="btn btn-primary rounded-pill" id="whatsappSubmit"><i class="bi bi-send me-1"></i> Enviar</button>
      </div>
    </div>
  </div>
</div>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/quagga@0.12.1/dist/quagga.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.7.1/nouislider.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCEcZuoclTEV-n1maYIvTQ8C9LkWutbcus&libraries=places&callback=initMap" async defer></script>
<script src="{{ url_for('static', filename='scripts/scripts.js') }}"></script>
{% block extra_scripts %}{% endblock %}
<script>
  // Initialize Toasts
  document.addEventListener('DOMContentLoaded', function () {
    var toasts = document.querySelectorAll('.toast');
    toasts.forEach(function (toast) {
      new bootstrap.Toast(toast).show();
    });
  });
</script>
</body>
</html>