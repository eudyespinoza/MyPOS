{% extends 'layout.html' %}
{% block title %}Pagos{% endblock %}
{% block content %}
<h2>Registrar Pago</h2>
<form id="paymentForm" class="mt-3">
  <input type="hidden" id="operacionId" name="operacion_id" value="">
  <div class="mb-3">
    <label class="form-check-label">
      <input type="checkbox" class="form-check-input" id="cashCheck"> Efectivo
    </label>
    <input type="number" step="0.01" class="form-control mt-2" id="cashAmount" name="efectivo" placeholder="Monto en efectivo" disabled>
  </div>
  <div class="mb-3">
    <label class="form-check-label">
      <input type="checkbox" class="form-check-input" id="transferCheck"> Transferencia
    </label>
    <input type="text" class="form-control mt-2" id="transferRef" name="referencia" placeholder="Referencia" disabled>
    <input type="number" step="0.01" class="form-control mt-2" id="transferAmount" name="transferencia" placeholder="Monto de transferencia" disabled>
  </div>
  <div class="mb-3">
    <label class="form-check-label">
      <input type="checkbox" class="form-check-input" id="cardCheck"> Tarjeta
    </label>
    <input type="number" step="0.01" class="form-control mt-2" id="cardAmount" name="tarjeta" placeholder="Monto con tarjeta" disabled>
  </div>
  <button type="button" class="btn btn-primary" onclick="registerMixedPayment()">Registrar Pago</button>
</form>
<script>
  document.querySelectorAll('#paymentForm input[type="checkbox"]').forEach(cb => {
    cb.addEventListener('change', () => {
      const targetId = cb.id.replace('Check', 'Amount');
      const amountField = document.getElementById(targetId);
      if (amountField) amountField.disabled = !cb.checked;
      if (cb.id === 'transferCheck') {
        document.getElementById('transferRef').disabled = !cb.checked;
      }
    });
  });
</script>
{% endblock %}
